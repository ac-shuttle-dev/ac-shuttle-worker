{
  "name": "booking",
  "description": "Production booking flow for AC Shuttles with enhanced security and professional email design",
  "version": "2.0.0",
  "lastUpdated": "2025-09-26",
  
  "ownerEmailLabel": "AC-Request",
  "ownerTemplate": {
    "subject": "üí∞ {price} Ride Request ‚Äì {startLocation} ‚Üí {endLocation}",
    "tags": ["booking-alert", "owner-notification", "action-required"],
    "design": {
      "theme": "professional-dark",
      "colors": {
        "primary": "#0D9B8A",
        "secondary": "#0BD8B6", 
        "background": "#000000",
        "sections": "#1a1a1a"
      },
      "layout": "information-first",
      "compatibility": ["gmail", "outlook", "apple-mail", "print-friendly"]
    },
    "actions": [
      {
        "type": "secure-link",
        "label": "‚úÖ ACCEPT",
        "path": "/accept/{secureToken}",
        "emailLabel": "AC-Accept",
        "description": "One-time secure token system with Google Sheets validation"
      },
      {
        "type": "secure-link", 
        "label": "‚ùå DECLINE",
        "path": "/deny/{secureToken}",
        "emailLabel": "AC-Deny",
        "description": "One-time secure token system with Google Sheets validation"
      }
    ],
    "features": {
      "secureTokens": true,
      "statusValidation": true,
      "replayProtection": true,
      "mobileResponsive": true,
      "printCompatible": true
    }
  },
  
  "customerTemplates": {
    "accepted": {
      "subjectPrefix": "‚úÖ",
      "subject": "Your AC Shuttles Booking Confirmed", 
      "tags": ["booking-accepted", "customer-notification"],
      "includeDriverContact": true,
      "design": "success-theme"
    },
    "denied": {
      "subjectPrefix": "‚ùå",
      "subject": "AC Shuttles Booking Update",
      "tags": ["booking-denied", "customer-notification"], 
      "includeAlternatives": true,
      "design": "professional-theme"
    }
  },
  
  "requiredFields": [
    "start_location",
    "end_location", 
    "customer_name",
    "pickup_time",
    "estimated_distance",
    "estimated_duration",
    ["customer_email", "email", "contact_email", "customerEmail"],
    "passengers"
  ],
  
  "optionalFields": [
    "price",
    "vehicle_type", 
    "notes",
    "contact_phone",
    "phone_number",
    "customer_notes",
    "additional_notes",
    "special_requests",
    "message"
  ],
  
  "security": {
    "tokenExpiration": "status-based",
    "tokenType": "sha256-hash",
    "validationSource": "google-sheets",
    "duplicateProtection": true,
    "rateLimiting": true
  },
  
  "dataFlow": {
    "persistence": {
      "primary": "google-sheets-primary",
      "backup": "google-sheets-backup", 
      "audit": "google-sheets-audit"
    },
    "statusTracking": {
      "column": "S",
      "states": ["Pending Review", "Accepted", "Denied"],
      "immutable": true
    }
  },
  
  "integrations": {
    "framer": {
      "webhookValidation": "hmac-sha256",
      "fieldMapping": "flexible",
      "retryHandling": "idempotent"
    },
    "resend": {
      "emailValidation": true,
      "tagging": true,
      "replyTo": "customer-email",
      "headers": ["X-Entity-Ref-ID", "List-Unsubscribe"]
    },
    "googleSheets": {
      "authentication": "service-account",
      "operations": ["read", "write", "update"],
      "auditTrail": true
    }
  }
}
